var openDB=(function(){var h={},b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDb||window.msIndexedDB,d=function(i,m){var l,j;try{j=i.openCursor();j.onsuccess=function(n){l=n.target.result;if(l){m(l.value);l["continue"]()}else{m("OpenDB: No more data in database.");return}};j.onerror=function(n){m("OpenDB: Error no data exists.");return}}catch(k){m("OpenDB: Failure reading the database. "+k.message)}},c=function(i,l,m){var j;try{j=i.get(l);j.onsuccess=function(n){m(j.result);return j.result};j.onerror=function(n){m("OpenDB: get "+n.message);return}}catch(k){m("OpenDB: Failure reading record. "+k.message)}},g=function(i,k){try{b.deleteDatabase(i)}catch(j){k("OpenDB: Error "+j.message)}},e=function(i,l,m){var k;try{k=i.add(l).onsuccess=function(n){m("OpenDB: Add record "+JSON.stringify(l.name)+" success.");return true}}catch(j){m("OpenDB: Failure adding record. "+j.message);return}},a=function(i,l,m){var j;try{j=i["delete"](l);j.onsuccess=function(n){m("OpenDB:"+l+"  is deleted.");return true};j.onerror=function(n){m("OpenDB: Failure deleting "+l+".");return}}catch(k){m("OpenDB: Failure deleting record. "+k.message);return}},f=function(j,m,n){var i,k;try{k=j.get(m.name);k.onsuccess=function(o){i=k.result;if(i){var p;for(p in m){if(m.hasOwnProperty(p)){if(p!=="name"){i[p]=m[p]}}}j.put(i).onsuccess=function(q){n("OpenDB: Updating "+i.name+" customer data.")};j.put(i).onerror=function(q){n("OpenDB: Failure updating "+i.name)}}};k.onerror=function(o){j.add(i).onsuccess=function(p){n("OpenDB: Adding "+i.name+"customer data")}}}catch(l){n("OpenDB: Failure to add client data. "+l.message)}};h.open=function(i,n,p,k){var q,m,l,o;try{m=b.open(i.NAME,i.VERSION);m.onerror=function(r){window.console.log("OpenDB: open... request.onerror "+r.message);return};m.onupgradeneeded=function(r){q=r.target.result;if(!q.objectStoreNames.contains("clientes")){o=q.createObjectStore("clientes",{keyPath:"name"})}};m.onsuccess=function(r){q=r.target.result;l=q.transaction("clientes","readwrite");o=l.objectStore("clientes");switch(k){case"read":d(o,p);break;case"get":c(o,n,p);break;case"add":e(o,n,p);break;case"update":f(o,n,p);break;case"delete":a(o,n,p);break;case"deleteDB":g(i.NAME,p);break;default:p("OpenDB: There is no operation defined.")}}}catch(j){p("OpenDB: Failure to open database. "+j.message);return}};return{odb:h}}());